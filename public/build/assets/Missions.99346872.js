import{S as K,i as Q,s as W,e as R,w as L,d as D,f as g,g as z,h as v,l as q,H as V,o as B,_ as ue,z as ce,a3 as ee,r as J,u as $,t as w,x as F,n as M,y as I,q as de,c as H,m as O,p as E,a0 as fe,M as ge,b as A,a as N,k as P,A as _e,v as me}from"./main.35577f29.js";import pe from"./Layout.8836a900.js";import{C as ae}from"./Card.ab15a3e8.js";import{u as he}from"./useForm.474d1e43.js";import"./InertiaLink.5d914c78.js";function be(l){let e,t=l[0].progress.percentage+"",i,d,n;return{c(){e=R("progress"),i=J(t),d=J("%"),g(e,"class","mb-3"),e.value=n=l[0].progress.percentage,g(e,"max","100")},m(r,a){z(r,e,a),v(e,i),v(e,d)},p(r,a){a&1&&t!==(t=r[0].progress.percentage+"")&&$(i,t),a&1&&n!==(n=r[0].progress.percentage)&&(e.value=n)},d(r){r&&B(e)}}}function ke(l){let e;return{c(){e=R("p"),e.innerHTML='<span class="font-semibold">Click to upload</span> or drag and drop',g(e,"class","mb-2 text-sm text-gray-500 dark:text-gray-400")},m(t,i){z(t,e,i)},p:V,d(t){t&&B(e)}}}function ve(l){let e,t,i,d,n,r,a,c,p,o,m;function s(b,j){return b[0].progress?be:ke}let _=s(l),u=_(l);return{c(){e=R("div"),t=R("label"),i=R("div"),d=L("svg"),n=L("path"),r=D(),u.c(),a=D(),c=R("form"),p=R("input"),g(n,"stroke-linecap","round"),g(n,"stroke-linejoin","round"),g(n,"stroke-width","2"),g(n,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),g(d,"aria-hidden","true"),g(d,"class","mb-3 h-10 w-10 text-gray-400"),g(d,"fill","none"),g(d,"stroke","currentColor"),g(d,"viewBox","0 0 24 24"),g(d,"xmlns","http://www.w3.org/2000/svg"),g(i,"class","flex flex-col items-center justify-center pt-5 pb-6"),g(p,"id","dropzone-file"),g(p,"type","file"),g(p,"class","hidden"),g(t,"for","dropzone-file"),g(t,"class","flex h-60 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-600 bg-gray-700 hover:border-gray-500 hover:bg-gray-600"),g(e,"class","flex w-full items-center justify-center")},m(b,j){z(b,e,j),v(e,t),v(t,i),v(i,d),v(d,n),v(i,r),u.m(i,null),v(t,a),v(t,c),v(c,p),o||(m=[q(p,"input",l[4]),q(p,"change",l[2]),q(e,"drop",l[3]),q(e,"dragover",ye)],o=!0)},p(b,[j]){_===(_=s(b))&&u?u.p(b,j):(u.d(1),u=_(b),u&&(u.c(),u.m(i,null)))},i:V,o:V,d(b){b&&B(e),u.d(),o=!1,ue(m)}}}function ye(l){l.preventDefault(),l.dataTransfer&&(l.dataTransfer.dropEffect="copy")}function we(l,e,t){let i,d=he({mission:null});ce(l,d,c=>t(0,i=c));function n(){i.post("/hub/missions")}function r(c){c.preventDefault(),c.stopPropagation(),ee(d,i.mission=c.dataTransfer.files[0],i),n()}return[i,d,n,r,c=>ee(d,i.mission=c.target.files[0],i)]}class Re extends K{constructor(e){super(),Q(this,e,we,ve,W,{})}}function te(l,e,t){const i=l.slice();return i[7]=e[t],i}function le(l){let e,t,i,d,n,r,a;function c(m,s){return m[0]?Me:Ce}let p=c(l),o=p(l);return{c(){e=R("button"),t=R("h3"),i=J(l[2]),d=D(),n=L("svg"),o.c(),g(t,"class","my-2 text-center text-xl font-bold uppercase leading-tight"),g(n,"xmlns","http://www.w3.org/2000/svg"),g(n,"fill","none"),g(n,"viewBox","0 0 24 24"),g(n,"stroke-width","2.5"),g(n,"stroke","currentColor"),g(n,"class","ml-1 mt-2.5 h-6 w-6"),g(e,"class","flex justify-center text-blue-600")},m(m,s){z(m,e,s),v(e,t),v(t,i),v(e,d),v(e,n),o.m(n,null),r||(a=q(e,"click",l[5]),r=!0)},p(m,s){s&4&&$(i,m[2]),p!==(p=c(m))&&(o.d(1),o=p(m),o&&(o.c(),o.m(n,null)))},d(m){m&&B(e),o.d(),r=!1,a()}}}function Ce(l){let e;return{c(){e=L("path"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round"),g(e,"d","M4.5 15.75l7.5-7.5 7.5 7.5")},m(t,i){z(t,e,i)},d(t){t&&B(e)}}}function Me(l){let e;return{c(){e=L("path"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round"),g(e,"d","M19.5 8.25l-7.5 7.5-7.5-7.5")},m(t,i){z(t,e,i)},d(t){t&&B(e)}}}function ie(l){let e,t;return e=new Re({}),{c(){H(e.$$.fragment)},m(i,d){O(e,i,d),t=!0},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function ne(l){let e,t;return e=new ae({props:{shouldRedirect:l[4],mission:l[7]}}),e.$on("cardClicked",l[6]),{c(){H(e.$$.fragment)},m(i,d){O(e,i,d),t=!0},p(i,d){const n={};d&16&&(n.shouldRedirect=i[4]),d&2&&(n.mission=i[7]),e.$set(n)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function je(l){let e,t,i,d,n,r,a=l[2]!=""&&le(l),c=l[3]&&ie(),p=l[1],o=[];for(let s=0;s<p.length;s+=1)o[s]=ne(te(l,p,s));const m=s=>M(o[s],1,1,()=>{o[s]=null});return{c(){e=R("div"),a&&a.c(),t=D(),i=R("div"),c&&c.c(),d=D();for(let s=0;s<o.length;s+=1)o[s].c();g(i,"class",n=(l[0]?"":"hidden")+" col-span-full grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"),g(e,"class","grid grid-cols-1 gap-3 pt-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6")},m(s,_){z(s,e,_),a&&a.m(e,null),v(e,t),v(e,i),c&&c.m(i,null),v(i,d);for(let u=0;u<o.length;u+=1)o[u].m(i,null);r=!0},p(s,[_]){if(s[2]!=""?a?a.p(s,_):(a=le(s),a.c(),a.m(e,t)):a&&(a.d(1),a=null),s[3]?c?_&8&&w(c,1):(c=ie(),c.c(),w(c,1),c.m(i,d)):c&&(F(),M(c,1,1,()=>{c=null}),I()),_&18){p=s[1];let u;for(u=0;u<p.length;u+=1){const b=te(s,p,u);o[u]?(o[u].p(b,_),w(o[u],1)):(o[u]=ne(b),o[u].c(),w(o[u],1),o[u].m(i,null))}for(F(),u=p.length;u<o.length;u+=1)m(u);I()}(!r||_&1&&n!==(n=(s[0]?"":"hidden")+" col-span-full grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"))&&g(i,"class",n)},i(s){if(!r){w(c);for(let _=0;_<p.length;_+=1)w(o[_]);r=!0}},o(s){M(c),o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)M(o[_]);r=!1},d(s){s&&B(e),a&&a.d(),c&&c.d(),de(o,s)}}}function ze(l,e,t){let{missions:i}=e,{title:d=""}=e,{uploadCard:n=!1}=e,{open:r=!0}=e,{shouldRedirect:a}=e;const c=o=>t(0,r=!r);function p(o){fe.call(this,l,o)}return l.$$set=o=>{"missions"in o&&t(1,i=o.missions),"title"in o&&t(2,d=o.title),"uploadCard"in o&&t(3,n=o.uploadCard),"open"in o&&t(0,r=o.open),"shouldRedirect"in o&&t(4,a=o.shouldRedirect)},[r,i,d,n,a,c,p]}class G extends K{constructor(e){super(),Q(this,e,ze,je,W,{missions:1,title:2,uploadCard:3,open:0,shouldRedirect:4})}}function oe(l,e,t){const i=l.slice();return i[11]=e[t][0],i[12]=e[t][1],i}function Be(l){let e;return{c(){e=L("path"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round"),g(e,"d","M13.5 10.5V6.75a4.5 4.5 0 119 0v3.75M3.75 21.75h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z")},m(t,i){z(t,e,i)},d(t){t&&B(e)}}}function De(l){let e;return{c(){e=L("path"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round"),g(e,"d","M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z")},m(t,i){z(t,e,i)},d(t){t&&B(e)}}}function Se(l){let e,t,i;function d(){return l[9](l[11])}return{c(){e=R("div"),g(e,"class","h-60 min-w-0 flex-grow space-y-1 rounded-lg bg-gray-800 p-3 shadow-md hover:bg-gray-700")},m(n,r){z(n,e,r),t||(i=q(e,"click",d),t=!0)},p(n,r){l=n},i:V,o:V,d(n){n&&B(e),t=!1,i()}}}function Te(l){let e,t;function i(){return l[8](l[11])}return e=new ae({props:{mission:l[12],shouldRedirect:l[4]}}),e.$on("cardClicked",i),{c(){H(e.$$.fragment)},m(d,n){O(e,d,n),t=!0},p(d,n){l=d;const r={};n&32&&(r.mission=l[12]),n&16&&(r.shouldRedirect=l[4]),e.$set(r)},i(d){t||(w(e.$$.fragment,d),t=!0)},o(d){M(e.$$.fragment,d),t=!1},d(d){E(e,d)}}}function se(l){let e,t,i,d,n,r;const a=[Te,Se],c=[];function p(o,m){return o[12]?0:1}return t=p(l),i=c[t]=a[t](l),{c(){e=R("div"),i.c(),d=D(),g(e,"class",n="flex "+(l[4]?"":"rounded-lg border-4 border-dashed")+" "+(l[0]&&l[0].play_order==l[11]&&l[0].operation_id==l[2].id?"border-rose-400":"border-gray-400"))},m(o,m){z(o,e,m),c[t].m(e,null),v(e,d),r=!0},p(o,m){let s=t;t=p(o),t===s?c[t].p(o,m):(F(),M(c[s],1,1,()=>{c[s]=null}),I(),i=c[t],i?i.p(o,m):(i=c[t]=a[t](o),i.c()),w(i,1),i.m(e,d)),(!r||m&53&&n!==(n="flex "+(o[4]?"":"rounded-lg border-4 border-dashed")+" "+(o[0]&&o[0].play_order==o[11]&&o[0].operation_id==o[2].id?"border-rose-400":"border-gray-400")))&&g(e,"class",n)},i(o){r||(w(i),r=!0)},o(o){M(i),r=!1},d(o){o&&B(e),c[t].d()}}}function He(l){let e,t,i,d,n,r,a,c,p,o,m,s,_;function u(k,C){return k[4]?De:Be}let b=u(l),j=b(l),S=Object.entries(l[5]),y=[];for(let k=0;k<S.length;k+=1)y[k]=se(oe(l,S,k));const U=k=>M(y[k],1,1,()=>{y[k]=null});return{c(){e=R("div"),t=R("div"),i=R("h3"),d=J(l[1]),n=D(),r=R("button"),a=L("svg"),j.c(),c=D(),p=R("div");for(let k=0;k<y.length;k+=1)y[k].c();g(i,"class","my-2 text-center text-xl font-bold uppercase leading-tight text-blue-600"),g(a,"xmlns","http://www.w3.org/2000/svg"),g(a,"fill","none"),g(a,"viewBox","0 0 24 24"),g(a,"stroke-width","2.5"),g(a,"stroke","currentColor"),g(a,"class","h-5 w-5"),g(r,"class","pl-1 text-blue-600"),g(t,"class","flex justify-center"),g(p,"class",o=(l[3]?"":"hidden")+" col-span-full grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-3"),g(e,"class","grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-3")},m(k,C){z(k,e,C),v(e,t),v(t,i),v(i,d),v(t,n),v(t,r),v(r,a),j.m(a,null),v(e,c),v(e,p);for(let f=0;f<y.length;f+=1)y[f].m(p,null);m=!0,s||(_=q(r,"click",l[7]),s=!0)},p(k,[C]){if((!m||C&2)&&$(d,k[1]),b!==(b=u(k))&&(j.d(1),j=b(k),j&&(j.c(),j.m(a,null))),C&117){S=Object.entries(k[5]);let f;for(f=0;f<S.length;f+=1){const h=oe(k,S,f);y[f]?(y[f].p(h,C),w(y[f],1)):(y[f]=se(h),y[f].c(),w(y[f],1),y[f].m(p,null))}for(F(),f=S.length;f<y.length;f+=1)U(f);I()}(!m||C&8&&o!==(o=(k[3]?"":"hidden")+" col-span-full grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-3"))&&g(p,"class",o)},i(k){if(!m){for(let C=0;C<S.length;C+=1)w(y[C]);m=!0}},o(k){y=y.filter(Boolean);for(let C=0;C<y.length;C+=1)M(y[C]);m=!1},d(k){k&&B(e),j.d(),de(y,k),s=!1,_()}}}function Oe(l,e,t){let i,{title:d}=e,{operation:n}=e,{open:r=!0}=e,{selecting:a}=e,c=!0;const p=ge();function o(u){a&&a.play_order==u&&a.operation_id==n.id?t(0,a=null):t(0,a={play_order:u,operation_id:n.id}),p("selecting",{})}const m=()=>t(4,c=!c),s=u=>o(u),_=u=>o(u);return l.$$set=u=>{"title"in u&&t(1,d=u.title),"operation"in u&&t(2,n=u.operation),"open"in u&&t(3,r=u.open),"selecting"in u&&t(0,a=u.selecting)},l.$$.update=()=>{l.$$.dirty&4&&n.missions.forEach(u=>{t(5,i[u.play_order]=u.mission,i)})},t(5,i={1:null,2:null,3:null}),[a,d,n,r,c,i,o,m,s,_]}class re extends K{constructor(e){super(),Q(this,e,Oe,He,W,{title:1,operation:2,open:3,selecting:0})}}function Ee(l){let e,t,i;function d(r){l[15](r)}let n={title:"Next operation",missions:l[8]};return l[4]!==void 0&&(n.shouldRedirect=l[4]),e=new G({props:n}),A.push(()=>N(e,"shouldRedirect",d)),e.$on("cardClicked",l[10]),{c(){H(e.$$.fragment)},m(r,a){O(e,r,a),i=!0},p(r,a){const c={};a&256&&(c.missions=r[8]),!t&&a&16&&(t=!0,c.shouldRedirect=r[4],P(()=>t=!1)),e.$set(c)},i(r){i||(w(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){E(e,r)}}}function Le(l){let e,t,i,d,n,r,a;function c(s){l[13](s)}let p={title:"This week",operation:l[0]};l[3]!==void 0&&(p.selecting=l[3]),t=new re({props:p}),A.push(()=>N(t,"selecting",c)),t.$on("selecting",l[9]);function o(s){l[14](s)}let m={title:"Next week",operation:l[1]};return l[3]!==void 0&&(m.selecting=l[3]),n=new re({props:m}),A.push(()=>N(n,"selecting",o)),n.$on("selecting",l[9]),{c(){e=R("div"),H(t.$$.fragment),d=D(),H(n.$$.fragment),g(e,"class","grid grid-cols-1 gap-3 sm:grid-cols-1 2xl:grid-cols-2")},m(s,_){z(s,e,_),O(t,e,null),v(e,d),O(n,e,null),a=!0},p(s,_){const u={};_&1&&(u.operation=s[0]),!i&&_&8&&(i=!0,u.selecting=s[3],P(()=>i=!1)),t.$set(u);const b={};_&2&&(b.operation=s[1]),!r&&_&8&&(r=!0,b.selecting=s[3],P(()=>r=!1)),n.$set(b)},i(s){a||(w(t.$$.fragment,s),w(n.$$.fragment,s),a=!0)},o(s){M(t.$$.fragment,s),M(n.$$.fragment,s),a=!1},d(s){s&&B(e),E(t),E(n)}}}function qe(l){let e,t,i,d,n,r,a,c,p,o,m,s,_;const u=[Le,Ee],b=[];function j(h,T){return h[2].manage_operations?0:1}t=j(l),i=b[t]=u[t](l);function S(h){l[16](h)}let y={title:"My missions",missions:l[7],uploadCard:!0};l[4]!==void 0&&(y.shouldRedirect=l[4]),n=new G({props:y}),A.push(()=>N(n,"shouldRedirect",S)),n.$on("cardClicked",l[10]);function U(h){l[17](h)}let k={title:"Unplayed missions",missions:l[6]};l[4]!==void 0&&(k.shouldRedirect=l[4]),c=new G({props:k}),A.push(()=>N(c,"shouldRedirect",U)),c.$on("cardClicked",l[10]);function C(h){l[18](h)}let f={title:"Played missions",missions:l[5]};return l[4]!==void 0&&(f.shouldRedirect=l[4]),m=new G({props:f}),A.push(()=>N(m,"shouldRedirect",C)),m.$on("cardClicked",l[10]),{c(){e=R("div"),i.c(),d=D(),H(n.$$.fragment),a=D(),H(c.$$.fragment),o=D(),H(m.$$.fragment)},m(h,T){z(h,e,T),b[t].m(e,null),v(e,d),O(n,e,null),v(e,a),O(c,e,null),v(e,o),O(m,e,null),_=!0},p(h,[T]){let X=t;t=j(h),t===X?b[t].p(h,T):(F(),M(b[X],1,1,()=>{b[X]=null}),I(),i=b[t],i?i.p(h,T):(i=b[t]=u[t](h),i.c()),w(i,1),i.m(e,d));const Y={};T&128&&(Y.missions=h[7]),!r&&T&16&&(r=!0,Y.shouldRedirect=h[4],P(()=>r=!1)),n.$set(Y);const Z={};T&64&&(Z.missions=h[6]),!p&&T&16&&(p=!0,Z.shouldRedirect=h[4],P(()=>p=!1)),c.$set(Z);const x={};T&32&&(x.missions=h[5]),!s&&T&16&&(s=!0,x.shouldRedirect=h[4],P(()=>s=!1)),m.$set(x)},i(h){_||(w(i),w(n.$$.fragment,h),w(c.$$.fragment,h),w(m.$$.fragment,h),_=!0)},o(h){M(i),M(n.$$.fragment,h),M(c.$$.fragment,h),M(m.$$.fragment,h),_=!1},d(h){h&&B(e),b[t].d(),E(n),E(c),E(m)}}}const Ie=pe;function Ae(l,e,t){let i,d,n,r,a;ce(l,_e,f=>t(12,a=f));let{missions:c}=e,{next_operation:p}=e,{next_2_operation:o}=e,{can:m}=e,s=null,_=!0;function u(f){t(4,_=!s)}function b(f){me.Inertia.put(`/hub/operations/${s.operation_id}`,{play_order:s.play_order,mission_id:f.detail.mission_id},{preserveScroll:!0}),t(3,s=null),t(4,_=!0)}function j(f){s=f,t(3,s)}function S(f){s=f,t(3,s)}function y(f){_=f,t(4,_)}function U(f){_=f,t(4,_)}function k(f){_=f,t(4,_)}function C(f){_=f,t(4,_)}return l.$$set=f=>{"missions"in f&&t(11,c=f.missions),"next_operation"in f&&t(0,p=f.next_operation),"next_2_operation"in f&&t(1,o=f.next_2_operation),"can"in f&&t(2,m=f.can)},l.$$.update=()=>{l.$$.dirty&1&&t(8,i=p.missions.map(f=>f.mission)),l.$$.dirty&6144&&t(7,d=c.filter(f=>f.user_id==a.props.auth.user.id||f.maintainer_id==a.props.auth.user.id)),l.$$.dirty&2052&&t(6,n=c.filter(f=>!f.last_played&&(f.verified_by||m.test_missions))),l.$$.dirty&2052&&t(5,r=c.filter(f=>f.last_played&&(f.verified_by||m.test_missions)))},[p,o,m,s,_,r,n,d,i,u,b,c,a,j,S,y,U,k,C]}class Ge extends K{constructor(e){super(),Q(this,e,Ae,qe,W,{missions:11,next_operation:0,next_2_operation:1,can:2})}}export{Ge as default,Ie as layout};
